{"version":3,"sources":["GetInTouch.View.ts"],"names":[],"mappings":"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","file":"GetInTouch.View.js","sourcesContent":["/*\r\n\tÂ© 2020 NetSuite Inc.\r\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\r\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\r\n\tmay use this code subject to the terms that govern your access and use.\r\n*/\r\n\r\n/// <amd-module name=\"GetInTouch.View\"/>\r\n/// <reference path=\"../../../Commons/Utilities/JavaScript/UnderscoreExtended.d.ts\"/>\r\n\r\nimport * as _ from 'underscore';\r\nimport * as get_in_touch_tpl from 'get_in_touch.tpl';\r\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\r\nimport { Loggers } from '../../../Commons/Loggers/JavaScript/Loggers';\r\nimport { GlobalViewsMessageView } from '../../../Commons/GlobalViews/JavaScript/GlobalViews.Message.View';\r\nimport Backbone = require('../../../Commons/Utilities/JavaScript/backbone.custom');\r\nimport BackboneView = require('../../../Commons/BackboneExtras/JavaScript/Backbone.View');\r\n// import ContactUsModel = require('./Contact.Us.Model');\r\nimport GetInTouchModel =require('./GetIn.Touch.Model');\r\nimport BackboneFormView = require('../../../Commons/Backbone.FormView/JavaScript/Backbone.FormView');\r\n\r\n// @module Contact.View @extends Backbone.View\r\nconst GetInTouchView: any = BackboneView.extend({\r\n    template: get_in_touch_tpl,\r\n\r\n    title: Utils.translate('Get in Touch'),\r\n\r\n    page_header: Utils.translate('Get in Touch'),\r\n\r\n    attributes: {\r\n        id: 'get-in-touch-landing-page',\r\n        class: 'get-in-touch-landing-page'\r\n    },\r\n\r\n    events: {\r\n        'submit form': 'submitForm',\r\n        'click [data-action=\"validate\"]': 'validateFields',\r\n    },\r\n    \r\n    bindings:{\r\n        '[name=\"firstname\"]': 'firstname',\r\n        '[name=\"lastname\"]': 'lastname',\r\n        '[name=\"email\"]': 'email',\r\n        '[name=\"phone\"]': 'phone',\r\n        '[name=\"comments\"]': 'comments',\r\n        '[name=\"business\"]':'business'\r\n    },\r\n\r\n    initialize:function(){\r\n        this.model = new GetInTouchModel();\r\n        this.model.on('save', _.bind(this.showSuccess, this));\r\n        this.model.on('saveCompleted', _.bind(this.resetForm, this));\r\n        BackboneFormView.add(this);\r\n        \r\n    },\r\n    resetForm:function(event){\r\n        this.model.unset('firstname');\r\n        this.model.unset('lastname');\r\n        this.model.unset('email');\r\n        this.model.unset('phone');\r\n        this.model.unset('comments');\r\n        this.model.unset('business');\r\n        event && event.preventDefault();\r\n    },\r\n    showSuccess: function() {\r\n      if (this.$savingForm) {\r\n        const global_view_message = new GlobalViewsMessageView({\r\n          message: Utils.translate(\"Your's request is submitted and Thank you for contacting us\"),\r\n          type: 'success',\r\n          closable: true\r\n        });\r\n      }\r\n    },\r\n\r\n    validateFields: function(e, model, props) {\r\n        const self =  this;\r\n        const loggers = Loggers.getLogger();\r\n        const actionId = loggers.start('get-in-touch-submit form');\r\n\r\n        const promise = self.saveForm(e, model, props);\r\n\r\n        if (promise) {\r\n            promise.done(() => {\r\n                loggers.end(actionId, {\r\n                    operationIds: self.model.getOperationIds(),\r\n                    status: 'success'\r\n                });\r\n            });\r\n            return promise && promise.then\r\n               (\r\n                 function(success){\r\n                  //  console.log(success);\r\n                   if (success.id){\r\n                     \r\n                     self.showMessage(Utils.translate(\"Your form has been submitted\"), 'success');\r\n                   }else{\r\n                     self.showMessage(Utils.translate(\"Something went wrong try later\"), 'error')\r\n                    }\r\n                  }\r\n                  , function(fail){\r\n                      fail.preventDefault = true;\r\n              \r\n                      _.each(fail.responseJSON.errormessage, function(message, field){\r\n                        self.showMessage(message, 'error', field);\r\n                      });\r\n                   \r\n                    }\r\n                );\r\n             \r\n        }else{\r\n         \r\n            }\r\n               \r\n    },     \r\n     showMessage: function(message, type, field){\r\n\r\n     if(type === 'error'){  \r\n        const global_view_message = new GlobalViewsMessageView({\r\n          message:message,\r\n          // message:message,\r\n          type: 'error',\r\n          closable: true,\r\n          \r\n        });\r\n     \r\n        this.$('[data-type=\"alert-placeholder\"]').html(global_view_message.render().$el.html());\r\n      }else{\r\n        const globa_view_message = new GlobalViewsMessageView({\r\n          message:message,\r\n          // message:message,\r\n          type: 'success',\r\n          closable: true,\r\n          \r\n        });\r\n   \r\n        this.$('[data-type=\"alert-placeholder\"]').html(globa_view_message.render().$el.html());\r\n      } \r\n  },    \r\n   \r\n    // @method getContext @return Contact.View.Context\r\n    getContext: function() {\r\n        \r\n      return {\r\n             \r\n      };\r\n    }\r\n});\r\n\r\nexport = GetInTouchView;\r\n\r\n\r\n"]}